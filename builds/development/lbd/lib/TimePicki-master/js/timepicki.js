!function(i){i.fn.timepicki=function(t){var n={format_output:function(i,t,n){return e.show_meridian?((i=Math.min(Math.max(parseInt(i),1),12))<10&&(i="0"+i),(t=Math.min(Math.max(parseInt(t),0),59))<10&&(t="0"+t),i+":"+t+" "+n):((i=Math.min(Math.max(parseInt(i),0),23))<10&&(i="0"+i),(t=Math.min(Math.max(parseInt(t),0),59))<10&&(t="0"+t),t=Math.min(Math.max(parseInt(t),0),59),i+":"+t)},increase_direction:"up",custom_classes:"",min_hour_value:1,max_hour_value:12,show_meridian:!0,step_size_hours:"1",step_size_minutes:"1",overflow_minutes:!1,disable_keyboard_mobile:!1,reset:!1,on_change:null,input_writable:!1},e=i.extend({},n,t);return this.each(function(){function t(t){return i.contains(d[0],t[0])||d.is(t)}function n(i,t){var n=_.find(".ti_tx input").val(),a=_.find(".mi_tx input").val(),r="";e.show_meridian&&(r=_.find(".mer_tx input").val()),0===n.length||0===a.length||e.show_meridian&&0===r.length||(o.attr("data-timepicki-tim",n),o.attr("data-timepicki-mini",a),e.show_meridian?(o.attr("data-timepicki-meri",r),o.val(e.format_output(n,a,r))):o.val(e.format_output(n,a))),null!==e.on_change&&e.on_change(o[0]),t&&s()}function a(){if(function(i){var t,n,a,s;o.is("[data-timepicki-tim]")?(n=Number(o.attr("data-timepicki-tim")),a=Number(o.attr("data-timepicki-mini")),e.show_meridian&&(s=o.attr("data-timepicki-meri"))):"object"==typeof i?(n=Number(i[0]),a=Number(i[1]),e.show_meridian&&(s=i[2])):(t=new Date,n=t.getHours(),a=t.getMinutes(),s="AM",e.show_meridian&&(0==n?n=12:12==n?s="PM":n>12&&(n-=12,s="PM")));n<10?_.find(".ti_tx input").val("0"+n):_.find(".ti_tx input").val(n);a<10?_.find(".mi_tx input").val("0"+a):_.find(".mi_tx input").val(a);e.show_meridian&&(s<10?_.find(".mer_tx input").val("0"+s):_.find(".mer_tx input").val(s))}(e.start_time),_.fadeIn(),!e.input_writable){var t=_.find("input:visible").first();t.focus()}var n=function(e){if(9===e.which&&e.shiftKey){t.off("keydown",n);var a=i(":input:visible:not(.timepicki-input)"),s=a.index(o);a.get(s-1).focus()}};t.on("keydown",n)}function s(){_.fadeOut()}function r(i,t){var n=Number(_.find(".time .ti_tx input").val()),a=Number(e.min_hour_value),s=Number(e.max_hour_value),r=Number(e.step_size_hours);if(i&&i.hasClass("action-next")||"next"===t)if(n+r>s){var m=a;m=m<10?"0"+m:String(m),_.find(".time .ti_tx input").val(m)}else(n+=r)<10&&(n="0"+n),_.find(".time .ti_tx input").val(n);else if(i&&i.hasClass("action-prev")||"prev"===t){if(n-r<Number(e.min_hour_value)){var l=s;l=l<10?"0"+l:String(l),_.find(".time .ti_tx input").val(l)}else(n-=r)<10&&(n="0"+n),_.find(".time .ti_tx input").val(n)}}function m(i,t){var n=Number(_.find(".mins .mi_tx input").val()),a=Number(e.step_size_minutes);i&&i.hasClass("action-next")||"next"===t?n+a>59?(_.find(".mins .mi_tx input").val("00"),e.overflow_minutes&&r(null,"next")):(n+=a)<10?_.find(".mins .mi_tx input").val("0"+n):_.find(".mins .mi_tx input").val(n):(i&&i.hasClass("action-prev")||"prev"===t)&&(n-a<=-1?(_.find(".mins .mi_tx input").val(60-a),e.overflow_minutes&&r(null,"prev")):(n-=a)<10?_.find(".mins .mi_tx input").val("0"+n):_.find(".mins .mi_tx input").val(n))}function l(i,t){var n=null;n=_.find(".meridian .mer_tx input").val(),i&&i.hasClass("action-next")||"next"===t?"AM"==n?_.find(".meridian .mer_tx input").val("PM"):_.find(".meridian .mer_tx input").val("AM"):(i&&i.hasClass("action-prev")||"prev"===t)&&("AM"==n?_.find(".meridian .mer_tx input").val("PM"):_.find(".meridian .mer_tx input").val("AM"))}var o=i(this),u=o.outerHeight();u+=10,i(o).wrap("<div class='time_pick'>");var d=i(this).parents(".time_pick"),p="down"===e.increase_direction?"<div class='prev action-prev'></div>":"<div class='prev action-next'></div>",c="down"===e.increase_direction?"<div class='next action-next'></div>":"<div class='next action-prev'></div>",v=i("<div class='timepicker_wrap "+e.custom_classes+"'><div class='arrow_top'></div><div class='time'>"+p+"<div class='ti_tx'><input type='text' class='timepicki-input'"+(e.disable_keyboard_mobile?"readonly":"")+"></div>"+c+"</div><div class='mins'>"+p+"<div class='mi_tx'><input type='text' class='timepicki-input'"+(e.disable_keyboard_mobile?"readonly":"")+"></div>"+c+"</div>");e.show_meridian&&v.append("<div class='meridian'>"+p+"<div class='mer_tx'><input type='text' class='timepicki-input' readonly></div>"+c+"</div>"),e.reset&&v.append("<div><a href='#' class='reset_time'>Reset</a></div>"),d.append(v);var _=i(this).next(".timepicker_wrap"),f=(_.find("div"),d.find("input"));i(".reset_time").on("click",function(i){o.val(""),s()}),i(".timepicki-input").keydown(function(t){function a(){done||(!function(){var i=/^\d+$/.test(m.val()),n=""===m.val();if(r.hasClass("time"))if(i){var a=e.show_meridian?Math.min(Math.max(parseInt(m.val()),1),12):Math.min(Math.max(parseInt(m.val()),0),23);m.val(a)}else n||m.val(l);else if(r.hasClass("mins"))if(i){var s=Math.min(Math.max(parseInt(m.val()),0),59);m.val(s)}else n||m.val(l);else r.hasClass("meridian")&&t.preventDefault()}(),done=!0)}if(13==t.keyCode)return t.preventDefault(),n(),void s();var r=i(this).parent().parent(),m=i(this),l=m.val();done=!1,setTimeout(a,0)}),i(document).on("click",function(e){if(!i(e.target).is(_)&&"block"==_.css("display")&&!i(e.target).is(i(".reset_time")))if(i(e.target).is(o)){_.css({top:u+"px",left:"0px"}),a()}else n(0,!t(i(e.target)))}),o.on("focus",a),f.on("focus",function(){var t=i(this);t.is(o)||t.select()}),f.on("keydown",function(t){var n,a=i(this);38===t.which?n="down"===e.increase_direction?"prev":"next":40===t.which&&(n="down"===e.increase_direction?"next":"prev"),a.closest(".timepicker_wrap .time").length?r(null,n):a.closest(".timepicker_wrap .mins").length?m(null,n):a.closest(".timepicker_wrap .meridian").length&&e.show_meridian&&l(null,n)}),f.on("blur",function(){setTimeout(function(){var e=i(document.activeElement);e.is(":input")&&!t(e)&&(n(),s())},0)});var h=_.find(".action-next"),x=_.find(".action-prev");i(x).add(h).on("click",function(){var t=i(this);"time"==t.parent().attr("class")?r(t):"mins"==t.parent().attr("class")?m(t):e.show_meridian&&l(t)})})}}(jQuery);