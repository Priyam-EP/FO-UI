tinymce.PluginManager.add("autoresize",function(e){function t(i){var a,s,r,g,m,l,d,u,h,f,c,y,_=tinymce.DOM;if(s=e.getDoc()){if(r=s.body,g=s.documentElement,m=o.autoresize_min_height,!r||i&&"setcontent"===i.type&&i.initial||e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen())return void(r&&g&&(r.style.overflowY="auto",g.style.overflowY="auto"));d=e.dom.getStyle(r,"margin-top",!0),u=e.dom.getStyle(r,"margin-bottom",!0),h=e.dom.getStyle(r,"padding-top",!0),f=e.dom.getStyle(r,"padding-bottom",!0),c=e.dom.getStyle(r,"border-top-width",!0),y=e.dom.getStyle(r,"border-bottom-width",!0),l=r.offsetHeight+parseInt(d,10)+parseInt(u,10)+parseInt(h,10)+parseInt(f,10)+parseInt(c,10)+parseInt(y,10),(isNaN(l)||0>=l)&&(l=tinymce.Env.ie?r.scrollHeight:tinymce.Env.webkit&&0===r.clientHeight?0:r.offsetHeight),l>o.autoresize_min_height&&(m=l),o.autoresize_max_height&&l>o.autoresize_max_height?(m=o.autoresize_max_height,r.style.overflowY="auto",g.style.overflowY="auto"):(r.style.overflowY="hidden",g.style.overflowY="hidden",r.scrollTop=0),m!==n&&(a=m-n,_.setStyle(e.iframeElement,"height",m+"px"),n=m,tinymce.isWebKit&&0>a&&t(i))}}function i(e,o,n){setTimeout(function(){t({}),e--?i(e,o,n):n&&n()},o)}var o=e.settings,n=0;e.settings.inline||(o.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),o.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t,i;t=e.getParam("autoresize_overflow_padding",1),i=e.getParam("autoresize_bottom_margin",50),!1!==t&&e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==i&&e.dom.setStyles(e.getBody(),{paddingBottom:i})}),e.on("nodechange setcontent keyup FullscreenStateChanged",t),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){i(20,100,function(){i(5,1e3)})}),e.addCommand("mceAutoResize",t))});