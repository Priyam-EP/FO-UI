!function(e){"use strict";var a={init:function(t){return this.data("jqv")&&null!=this.data("jqv")||(t=a._saveOptions(this,t),e("body").on("click",".formError",function(){e(this).fadeOut(150,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()})})),this},attach:function(t){if(!e(this).is("form"))return alert("Sorry, jqv.attach() only applies to a form"),this;var r;return r=t?a._saveOptions(this,t):this.data("jqv"),r.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",r.binded&&(this.find("["+r.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(r.validationEventTrigger,a._onFieldEvent),this.find("["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]").bind("click",a._onFieldEvent),this.find("["+r.validateAttribute+"*=validate][class*=datepicker]").bind(r.validationEventTrigger,{delay:300},a._onFieldEvent)),r.autoPositionUpdate&&e(window).bind("resize",{noAnimation:!0,formElem:this},a.updatePromptsPosition),this.bind("submit",a._onSubmitEvent),this},detach:function(){if(!e(this).is("form"))return alert("Sorry, jqv.detach() only applies to a form"),this;var t=this.data("jqv");return this.find("["+t.validateAttribute+"*=validate]").not("[type=checkbox]").unbind(t.validationEventTrigger,a._onFieldEvent),this.find("["+t.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").unbind("click",a._onFieldEvent),this.unbind("submit",a.onAjaxFormComplete),this.find("["+t.validateAttribute+"*=validate]").not("[type=checkbox]").off(t.validationEventTrigger,a._onFieldEvent),this.find("["+t.validateAttribute+"*=validate][type=checkbox]").off("click",a._onFieldEvent),this.off("submit",a.onAjaxFormComplete),this.removeData("jqv"),t.autoPositionUpdate&&e(window).unbind("resize",a.updatePromptsPosition),this},validate:function(){var t=e(this),r=null;if(t.is("form")&&!t.hasClass("validating")){t.addClass("validating");i=t.data("jqv");r=a._validateFields(this),setTimeout(function(){t.removeClass("validating")},100),r&&i.onFormSuccess?i.onFormSuccess():!r&&i.onFormFailure&&i.onFormFailure()}else if(t.is("form"))t.removeClass("validating");else{var i=t.closest("form").data("jqv");(r=a._validateField(t,i))&&i.onFieldSuccess?i.onFieldSuccess():i.onFieldFailure&&i.InvalidFields.length>0&&i.onFieldFailure()}return r},updatePromptsPosition:function(t){if(t&&this==window)var r=t.data.formElem,i=t.data.noAnimation;else r=e(this.closest("form"));var s=r.data("jqv");return r.find("["+s.validateAttribute+"*=validate]").not(":disabled").each(function(){var t=e(this);s.prettySelect&&t.is(":hidden")&&(t=r.find("#"+s.usePrefix+t.attr("id")+s.useSuffix));var o=a._getPrompt(t),n=e(o).find(".formErrorContent").html();o&&a._updatePrompt(t,e(o),n,void 0,!1,s,i)}),this},showPrompt:function(e,t,r,i){var s=this.closest("form").data("jqv");return s||(s=a._saveOptions(this,s)),r&&(s.promptPosition=r),s.showArrow=1==i,a._showPrompt(this,e,t,!1,s),this},hide:function(){var t,r=e(this).closest("form").data("jqv"),i=r&&r.fadeDuration?r.fadeDuration:.3;return t=e(this).is("form")?"parentForm"+a._getClassName(e(this).attr("id")):a._getClassName(e(this).attr("id"))+"formError",e("."+t).fadeTo(i,.3,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},hideAll:function(){var a=this.data("jqv"),t=a?a.fadeDuration:.3;return e(".formError").fadeTo(t,.3,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},_onFieldEvent:function(t){var r=e(this),i=r.closest("form").data("jqv");i.eventTrigger="field",window.setTimeout(function(){a._validateField(r,i),0==i.InvalidFields.length&&i.onFieldSuccess?i.onFieldSuccess():i.InvalidFields.length>0&&i.onFieldFailure&&i.onFieldFailure()},t.data?t.data.delay:0)},_onSubmitEvent:function(){var t=e(this),r=t.data("jqv");r.eventTrigger="submit";var i=a._validateFields(t);return i&&r.ajaxFormValidation?(a._validateFormWithAjax(t,r),!1):r.onValidationComplete?!!r.onValidationComplete(t,i):i},_checkAjaxStatus:function(a){var t=!0;return e.each(a.ajaxValidCache,function(e,a){if(!a)return t=!1,!1}),t},_checkAjaxFieldStatus:function(e,a){return 1==a.ajaxValidCache[e]},_validateFields:function(t){var r=t.data("jqv"),i=!1;t.trigger("jqv.form.validating");var s=null;if(t.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var o=e(this),n=[];if(e.inArray(o.attr("name"),n)<0){if((i|=a._validateField(o,r))&&null==s&&(s=o.is(":hidden")&&r.prettySelect?o=t.find("#"+r.usePrefix+a._jqSelector(o.attr("id"))+r.useSuffix):o),r.doNotShowAllErrosOnSubmit)return!1;if(n.push(o.attr("name")),1==r.showOneMessage&&i)return!1}}),t.trigger("jqv.form.result",[i]),i){if(r.scroll){var o=s.offset().top,n=s.offset().left,l=r.promptPosition;if("string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":"))),"bottomRight"!=l&&"bottomLeft"!=l){var d=a._getPrompt(s);d&&(o=d.offset().top)}if(r.isOverflown){var u=e(r.overflownDIV);if(!u.length)return!1;o+=u.scrollTop()+-parseInt(u.offset().top)-5;e(r.overflownDIV+":not(:animated)").animate({scrollTop:o},1100,function(){r.focusFirstField&&s.focus()})}else e("body,html").stop().animate({scrollTop:o,scrollLeft:n},1100,function(){r.focusFirstField&&s.focus()})}else r.focusFirstField&&s.focus();return!1}return!0},_validateFormWithAjax:function(t,r){var i=t.serialize(),s=r.ajaxmethod?r.ajaxmethod:"GET",o=r.ajaxFormValidationURL?r.ajaxFormValidationURL:t.attr("action"),n=r.dataType?r.dataType:"json";e.ajax({type:s,url:o,cache:!1,dataType:n,data:i,form:t,methods:a,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(t,r)},error:function(e,t){a._ajaxError(e,t)},success:function(i){if("json"==n&&!0!==i){for(var s=!1,o=0;o<i.length;o++){var l=i[o],d=l[0],u=e(e("#"+d)[0]);if(1==u.length){var c=l[2];if(1==l[1])if(""!=c&&c){if(r.allrules[c]){(f=r.allrules[c].alertTextOk)&&(c=f)}a._showPrompt(u,c,"pass",!1,r,!0)}else a._closePrompt(u);else{if(s|=!0,r.allrules[c]){var f=r.allrules[c].alertText;f&&(c=f)}a._showPrompt(u,c,"",!1,r,!0)}}}r.onAjaxFormComplete(!s,t,i,r)}else r.onAjaxFormComplete(!0,t,i,r)}})},_validateField:function(t,r,i){if(t.attr("id")||(t.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),t.is(":hidden")&&!r.prettySelect||t.parent().is(":hidden"))return!1;var s=t.attr(r.validateAttribute),o=/validate\[(.*)\]/.exec(s);if(!o)return!1;var n=o[1].split(/\[|,|\]/),l=t.attr("name"),d=t.attr("id"),u="",c="",f=!1,v=!1;r.isError=!1,r.showArrow=!0,r.maxErrorsPerField>0&&(v=!0);var m=e(t.closest("form"));for(var p in n)n[p]=n[p].replace(" ",""),""===n[p]&&delete n[p];for(var p=0,g=0;p<n.length;p++){if(v&&g>=r.maxErrorsPerField){if(!f){var h=e.inArray("required",n);f=-1!=h&&h>=p}break}var x=void 0;switch(n[p]){case"required":f=!0,x=a._getErrorMessage(m,t,n[p],n,p,r,a._required);break;case"custom":x=a._getErrorMessage(m,t,n[p],n,p,r,a._custom);break;case"groupRequired":var _="["+r.validateAttribute+"*="+n[p+1]+"]",b=m.find(_).eq(0);if(b[0]!=t[0]){a._validateField(b,r,i),r.showArrow=!0;continue}(x=a._getErrorMessage(m,t,n[p],n,p,r,a._groupRequired))&&(f=!0),r.showArrow=!1;break;case"ajax":(x=a._ajax(t,n,p,r))&&(c="load");break;case"minSize":x=a._getErrorMessage(m,t,n[p],n,p,r,a._minSize);break;case"maxSize":x=a._getErrorMessage(m,t,n[p],n,p,r,a._maxSize);break;case"min":x=a._getErrorMessage(m,t,n[p],n,p,r,a._min);break;case"max":x=a._getErrorMessage(m,t,n[p],n,p,r,a._max);break;case"minWriters":x=a._getErrorMessage(m,t,n[p],n,p,r,a._minWriters);break;case"maxWriters":x=a._getErrorMessage(m,t,n[p],n,p,r,a._maxWriters);break;case"past":x=a._getErrorMessage(m,t,n[p],n,p,r,a._past);break;case"future":x=a._getErrorMessage(m,t,n[p],n,p,r,a._future);break;case"priceRange":x=a._getErrorMessage(m,t,n[p],n,p,r,a._priceRange);break;case"dateRange":_="["+r.validateAttribute+"*="+n[p+1]+"]";r.firstOfGroup=m.find(_).eq(0),r.secondOfGroup=m.find(_).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(x=a._getErrorMessage(m,t,n[p],n,p,r,a._dateRange)),x&&(f=!0),r.showArrow=!1;break;case"dateTimeRange":_="["+r.validateAttribute+"*="+n[p+1]+"]";r.firstOfGroup=m.find(_).eq(0),r.secondOfGroup=m.find(_).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(x=a._getErrorMessage(m,t,n[p],n,p,r,a._dateTimeRange)),x&&(f=!0),r.showArrow=!1;break;case"maxCheckbox":t=e(m.find("input[name='"+l+"']")),x=a._getErrorMessage(m,t,n[p],n,p,r,a._maxCheckbox);break;case"minCheckbox":t=e(m.find("input[name='"+l+"']")),x=a._getErrorMessage(m,t,n[p],n,p,r,a._minCheckbox);break;case"equals":x=a._getErrorMessage(m,t,n[p],n,p,r,a._equals);break;case"notequals":x=a._getErrorMessage(m,t,n[p],n,p,r,a._notequals);break;case"funcCall":x=a._getErrorMessage(m,t,n[p],n,p,r,a._funcCall);break;case"creditCard":x=a._getErrorMessage(m,t,n[p],n,p,r,a._creditCard);break;case"condRequired":void 0!==(x=a._getErrorMessage(m,t,n[p],n,p,r,a._condRequired))&&(f=!0);break;case"nbblogRange":t=e(m.find("input[id='"+d+"']")),x=a._getErrorMessage(m,t,n[p],n,p,r,a._nbblogRange);break;case"nbnewsRange":t=e(m.find("input[id='"+d+"']")),x=a._getErrorMessage(m,t,n[p],n,p,r,a._nbnewsRange);break;case"nbdescRange":t=e(m.find("input[id='"+d+"']")),x=a._getErrorMessage(m,t,n[p],n,p,r,a._nbdescRange);break;case"nbguideRange":t=e(m.find("input[id='"+d+"']")),x=a._getErrorMessage(m,t,n[p],n,p,r,a._nbguideRange)}var T=!1;if("object"==typeof x)switch(x.status){case"_break":T=!0;break;case"_error":x=x.message;break;case"_error_no_prompt":return!0}if(T)break;"string"==typeof x&&(u+=x+"<br/>",r.isError=!0,g++)}!f&&t.val().length<1&&(r.isError=!1);var C=t.prop("type");("radio"==C||"checkbox"==C)&&m.find("input[name='"+l+"']").size()>1&&(t=e(m.find("input[name='"+l+"'][type!=hidden]:first")),r.showArrow=!1),t.is(":hidden")&&r.prettySelect&&(t=m.find("#"+r.usePrefix+a._jqSelector(t.attr("id"))+r.useSuffix)),r.isError?a._showPrompt(t,u,c,!1,r):a._closePrompt(t),t.trigger("jqv.field.result",[t,r.isError,u]);var F=e.inArray(t[0],r.InvalidFields);return-1==F?r.isError&&r.InvalidFields.push(t[0]):r.isError||r.InvalidFields.splice(F,1),a._handleStatusCssClasses(t,r),r.isError},_handleStatusCssClasses:function(e,a){a.addSuccessCssClassToField&&e.removeClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&e.removeClass(a.addFailureCssClassToField),a.addSuccessCssClassToField&&!a.isError&&e.addClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&a.isError&&e.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(t,r,i,s,o,n,l){var d=i;if("custom"==i){i="custom["+s[jQuery.inArray(i,s)+1]+"]"}var u,c=(r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class")).split(" ");if(void 0!=(u="future"==i||"past"==i||"maxCheckbox"==i||"minCheckbox"==i||"priceRange"==i?l(t,r,s,o,n):l(r,s,o,n))){var f=a._getCustomErrorMessage(e(r),c,d,n);f&&(u=f)}return u},_getCustomErrorMessage:function(e,t,r,i){var s=!1,o=a._validityProp[r];if(void 0!=o&&void 0!=(s=e.attr("data-errormessage-"+o)))return s;if(void 0!=(s=e.attr("data-errormessage")))return s;var n="#"+e.attr("id");if(void 0!==i.custom_error_messages[n]&&void 0!==i.custom_error_messages[n][r])s=i.custom_error_messages[n][r].message;else if(t.length>0)for(var l=0;l<t.length&&t.length>0;l++){var d="."+t[l];if(void 0!==i.custom_error_messages[d]&&void 0!==i.custom_error_messages[d][r]){s=i.custom_error_messages[d][r].message;break}}return s||void 0===i.custom_error_messages[r]||void 0===i.custom_error_messages[r].message||(s=i.custom_error_messages[r].message),s},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",notequals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing",nbblogRange:"pattern-mismatch",nbnewsRange:"pattern-mismatch",nbdescRange:"pattern-mismatch",nbguideRange:"pattern-mismatch"},_required:function(a,t,r,i){switch(a.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:if(!e.trim(a.val())||a.val()==a.attr("data-validation-placeholder")||a.val()==a.attr("placeholder"))return i.allrules[t[r]].alertText;break;case"radio":case"checkbox":var s=a.closest("form"),o=a.attr("name");if(0==s.find("input[name='"+o+"']:checked").size())return 1==s.find("input[name='"+o+"']:visible").size()?i.allrules[t[r]].alertTextCheckboxe:i.allrules[t[r]].alertTextCheckboxMultiple}},_groupRequired:function(t,r,i,s){var o="["+s.validateAttribute+"*="+r[i+1]+"]",n=!1;if(t.closest("form").find(o).each(function(){if(!a._required(e(this),r,i,s))return n=!0,!1}),!n)return s.allrules[r[i]].alertText},_custom:function(e,a,t,r){var i,s=a[t+1],o=r.allrules[s];if(o)if(o.regex){var n=o.regex;if(!n)return void alert("jqv:custom regex not found - "+s);if(!new RegExp(n).test(e.val()))return r.allrules[s].alertText}else{if(!o.func)return void alert("jqv:custom type not allowed "+s);if("function"!=typeof(i=o.func))return void alert("jqv:custom parameter 'function' is no function - "+s);if(!i(e,a,t,r))return r.allrules[s].alertText}else alert("jqv:custom rule not found - "+s)},_funcCall:function(e,a,t,r){var i,s=a[t+1];if(s.indexOf(".")>-1){for(var o=s.split("."),n=window;o.length;)n=n[o.shift()];i=n}else i=window[s]||r.customFunctions[s];if("function"==typeof i)return i(e,a,t,r)},_equals:function(a,t,r,i){var s=t[r+1];if(a.val()!=e("#"+s).val())return i.allrules.equals.alertText},_notequals:function(a,t,r,i){var s=t[r+1];e("."+s).each(function(t,s){if(a.val()==e(this).val()&&t!=r)return i.allrules.equals.alertText})},_maxSize:function(e,a,t,r){var i=a[t+1];if(e.val().length>i){var s=r.allrules.maxSize;return s.alertText+i+s.alertText2}},_minSize:function(e,a,t,r){var i=a[t+1];if(e.val().length<i){var s=r.allrules.minSize;return s.alertText+i+s.alertText2}},_min:function(e,a,t,r){var i=parseFloat(a[t+1]),s=e.val().replace(",",".");if(parseFloat(s)<i){var o=r.allrules.min;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_max:function(e,a,t,r){var i=parseFloat(a[t+1]),s=e.val().replace(",",".");if(parseFloat(s)>i){var o=r.allrules.max;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_minWriters:function(e,a,t,r){var i=parseFloat(a[t+1]),s=e.val().replace(",",".");if(parseFloat(s)<i){var o=r.allrules.minWriters;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_maxWriters:function(e,a,t,r){var i=parseFloat(a[t+1]);if(parseFloat(e.val())>i){var s=r.allrules.maxWriters;return s.alertText2?s.alertText+i+s.alertText2:s.alertText+i}},_past:function(t,r,i,s,o){var n,l=i[s+1],d=e(t.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())n=new Date;else if(void 0!=d.val()){if(d.is(":disabled"))return;n=a._parseDate(d.val())}else n=a._parseDate(l);if(a._parseDate(r.val())>n){var u=o.allrules.past;return u.alertText2?u.alertText+a._dateToString(n)+u.alertText2:u.alertText+a._dateToString(n)}},_future:function(t,r,i,s,o){var n,l=i[s+1],d=e(t.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())n=new Date;else if(void 0!=d.val()){if(d.is(":disabled"))return;n=a._parseDate(d.val())}else n=a._parseDate(l);if(a._parseDate(r.val())<n){var u=o.allrules.future;return u.alertText2?u.alertText+a._dateToString(n)+u.alertText2:u.alertText+a._dateToString(n)}},_priceRange:function(a,t,r,i,s){var o,n=r[i+1],l=e(a.find("input[id='"+n.replace(/^#+/,"")+"']"));if(void 0!=l.val()){if(l.is(":disabled"))return;o=parseFloat(l.val())}if(parseFloat(t.val())>o){return s.allrules.priceRange.alertText}},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,a){return new Date(e.toString())<new Date(a.toString())},_dateRange:function(e,t,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:a._isDate(i.firstOfGroup[0].value)&&a._isDate(i.secondOfGroup[0].value)&&a._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2},_dateTimeRange:function(e,t,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:a._isDateTime(i.firstOfGroup[0].value)&&a._isDateTime(i.secondOfGroup[0].value)&&a._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2},_maxCheckbox:function(e,a,t,r,i){var s=t[r+1],o=a.attr("name");if(e.find("input[name='"+o+"']:checked").size()>s)return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+s+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,a,t,r,i){var s=t[r+1],o=a.attr("name");if(e.find("input[name='"+o+"']:checked").size()<s)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+s+" "+i.allrules.minCheckbox.alertText2},_nbblogRange:function(e,a,t,r){var i=e.val();if(200>i||i>500)return r.allrules.nbblogRange.alertText},_nbnewsRange:function(e,a,t,r){var i=e.val();if(50>i||i>200)return r.allrules.nbnewsRange.alertText},_nbdescRange:function(e,a,t,r){var i=e.val();if(40>i||i>150)return r.allrules.nbdescRange.alertText},_nbguideRange:function(e,a,t,r){var i=e.val();if(500>i||i>1500)return r.allrules.nbguideRange.alertText},_creditCard:function(e,a,t,r){var i=!1,s=e.val().replace(/ +/g,"").replace(/-+/g,""),o=s.length;if(o>=14&&o<=16&&parseInt(s)>0){var n,l=0,t=o-1,d=1,u=new String;do{n=parseInt(s.charAt(t)),u+=d++%2==0?2*n:n}while(--t>=0);for(t=0;t<u.length;t++)l+=parseInt(u.charAt(t));i=l%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(t,r,i,s){var o=r[i+1],n=s.allrules[o],l=n.extraData,d=n.extraDataDynamic,u={fieldId:t.attr("id"),fieldValue:t.val()};if("object"==typeof l)e.extend(u,l);else if("string"==typeof l)for(var c=l.split("&"),i=0;i<c.length;i++){var f=c[i].split("=");f[0]&&f[0]&&(u[f[0]]=f[1])}if(d)for(var v=String(d).split(","),i=0;i<v.length;i++){var m=v[i];if(e(m).length){var p=t.closest("form").find(m).val();m.replace("#",""),escape(p);u[m.replace("#","")]=p}}if("field"==s.eventTrigger&&delete s.ajaxValidCache[t.attr("id")],!s.isError&&!a._checkAjaxFieldStatus(t.attr("id"),s))return e.ajax({type:s.ajaxFormValidationMethod,url:n.url,cache:!1,dataType:"json",data:u,field:t,rule:n,methods:a,options:s,beforeSend:function(){},error:function(e,t){a._ajaxError(e,t)},success:function(r){var i=r[0],o=e("#"+i).eq(0);if(1==o.length){var l=r[1],d=r[2];if(l){if(s.ajaxValidCache[i]=!0,d){if(s.allrules[d]){u=s.allrules[d].alertTextOk;u&&(d=u)}}else d=n.alertTextOk;d?a._showPrompt(o,d,"pass",!0,s):a._closePrompt(o),"submit"==s.eventTrigger&&t.closest("form").submit()}else{if(s.ajaxValidCache[i]=!1,s.isError=!0,d){if(s.allrules[d]){var u;(u=s.allrules[d].alertText)&&(d=u)}}else d=n.alertText;a._showPrompt(o,d,"",!0,s)}}o.trigger("jqv.field.result",[o,s.isError,d])}}),n.alertTextLoad},_ajaxError:function(e,a){0==e.status&&null==a?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+a)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var a=e.split("-");return a==e&&(a=e.split("/")),new Date(a[0],a[1]-1,a[2])},_showPrompt:function(e,t,r,i,s,o){var n=a._getPrompt(e);o&&(n=!1),n?a._updatePrompt(e,n,t,r,i,s):a._buildPrompt(e,t,r,i,s)},_buildPrompt:function(t,r,i,s,o){var n=e("<div>");switch(n.addClass(a._getClassName(t.attr("id"))+"formError"),n.addClass("parentForm"+a._getClassName(t.parents("form").attr("id"))),n.addClass("formError"),i){case"pass":n.addClass("greenPopup");break;case"load":n.addClass("blackPopup")}s&&n.addClass("ajaxed");e("<div>").addClass("formErrorContent").html(r).appendTo(n);if(o.showArrow){var l=e("<div>").addClass("formErrorArrow"),d=t.data("promptPosition")||o.promptPosition;if("string"==typeof d){-1!=(u=d.indexOf(":"))&&(d=d.substring(0,u))}switch(d){case"bottomLeft":case"bottomRight":n.find(".formErrorContent").before(l),l.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":l.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),n.append(l)}}t.closest(".ui-dialog").length&&n.addClass("formErrorInsideDialog"),n.css({opacity:0,position:"absolute"}),t.before(n);var u=a._calculatePosition(t,n,o);return n.css({top:u.callerTopPosition,left:u.callerleftPosition,marginTop:u.marginTopSize,opacity:0}).data("callerField",t),o.autoHidePrompt&&setTimeout(function(){n.animate({opacity:0},function(){n.closest(".formErrorOuter").remove(),n.remove()})},o.autoHideDelay),n.animate({opacity:.87})},_updatePrompt:function(e,t,r,i,s,o,n){if(t){void 0!==i&&("pass"==i?t.addClass("greenPopup"):t.removeClass("greenPopup"),"load"==i?t.addClass("blackPopup"):t.removeClass("blackPopup")),s?t.addClass("ajaxed"):t.removeClass("ajaxed"),t.find(".formErrorContent").html(r);var l=a._calculatePosition(e,t,o),d={top:l.callerTopPosition,left:l.callerleftPosition,marginTop:l.marginTopSize};n?t.css(d):t.animate(d)}},_closePrompt:function(e){var t=a._getPrompt(e);t&&t.fadeTo("fast",0,function(){t.parent(".formErrorOuter").remove(),t.remove()})},closePrompt:function(e){return a._closePrompt(e)},_getPrompt:function(t){var r=e(t).closest("form").attr("id"),i=a._getClassName(t.attr("id"))+"formError",s=e("."+a._escapeExpression(i)+".parentForm"+r)[0];if(s)return e(s)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(a){var t=e(document),r=e("body"),i=a&&a.hasClass("rtl")||a&&"rtl"===(a.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase()||r.hasClass("rtl")||"rtl"===(r.attr("dir")||"").toLowerCase();return Boolean(i)},_calculatePosition:function(e,a,t){var r,i,s,o=e.width(),n=e.position().left,l=e.position().top;e.height();r=i=0,s=-a.height();var d=e.data("promptPosition")||t.promptPosition,u="",c="",f=0,v=0;switch("string"==typeof d&&-1!=d.indexOf(":")&&(u=d.substring(d.indexOf(":")+1),d=d.substring(0,d.indexOf(":")),-1!=u.indexOf(",")&&(c=u.substring(u.indexOf(",")+1),u=u.substring(0,u.indexOf(",")),v=parseInt(c),isNaN(v)&&(v=0)),f=parseInt(u),isNaN(u)&&(u=0)),d){default:case"topRight":i+=n+o-30,r+=l;break;case"topLeft":r+=l,i+=n;break;case"centerRight":r=l+4,s=0,i=n+e.outerWidth(!0)+5;break;case"centerLeft":i=n-(a.width()+2),r=l+4,s=0;break;case"bottomLeft":r=l+e.height()+5,s=0,i=n;break;case"bottomRight":i=n+o-30,r=l+e.height()+5,s=0}return i+=f,r+=v,{callerTopPosition:r+"px",callerleftPosition:i+"px",marginTopSize:s+"px"}},_saveOptions:function(a,t){if(e.validationEngineLanguage)var r=e.validationEngineLanguage.allRules;else e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");e.validationEngine.defaults.allrules=r;var i=e.extend(!0,{},e.validationEngine.defaults,t);return a.data("jqv",i),i},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,r,i){var s,o;for(s=r+1;s<t.length;s++)if((o=jQuery("#"+t[s]).first()).length&&void 0==a._required(o,["required"],0,i))return a._required(e,["required"],0,i)}};e.fn.validationEngine=function(t){var r=e(this);return r[0]?"string"==typeof t&&"_"!=t.charAt(0)&&a[t]?("showPrompt"!=t&&"hide"!=t&&"hideAll"!=t&&a.init.apply(r),a[t].apply(r,Array.prototype.slice.call(arguments,1))):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist in jQuery.validationEngine"):(a.init.apply(r,arguments),a.attach.apply(r)):r},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onFormSuccess:!1,onFormFailure:!1,addSuccessCssClassToField:!1,addFailureCssClassToField:!1,autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,usePrefix:"",useSuffix:"",showOneMessage:!1}},e(function(){e.validationEngine.defaults.promptPosition=a.isRTL()?"topLeft":"topRight"})}(jQuery);