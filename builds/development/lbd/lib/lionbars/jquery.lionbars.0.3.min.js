!function(t){t.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},t.fn.lionbars=function(r){function l(r,l){var i=t(r).get(0);q=void 0!==l?l.height:i.scrollHeight,z=void 0!==l?l.width:i.scrollWidth,F=i.clientHeight,E=i.clientWidth,D=i.offsetHeight,A=i.offsetWidth,function(r){var l=t(r);l.css({overflow:"auto"}),T=A-E-k-Q,l.css({overflow:"hidden"})}(t(r)),function(r){var l=t(r);l.css({overflow:"auto"}),B=D-F-j-S,l.css({overflow:"hidden"})}(t(r))}function i(r){var l=t(r);if(L=!1,C=!1,function(r){var l=t(r);X=parseInt(l.css("padding-top").replace("px","")),Y=parseInt(l.css("padding-left").replace("px","")),O=parseInt(l.css("padding-bottom").replace("px","")),R=parseInt(l.css("padding-right").replace("px",""))}(l),function(r){var l=t(r);j=parseInt(l.css("border-top-width").replace("px","")),Q=parseInt(l.css("border-right-width").replace("px","")),S=parseInt(l.css("border-bottom-width").replace("px","")),k=parseInt(l.css("border-left-width").replace("px",""))}(l),l.css({overflow:"hidden"}),l.get(0).scrollHeight>l.get(0).clientHeight&&(L=!0),l.get(0).scrollWidth>l.get(0).clientWidth&&(C=!0),l.css({overflow:"auto"}),L||C)return!0}function e(r,l,i){var e=t(r),s=e.attr("id"),n=0;void 0!==s?(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+y+"-"+s+'"></div>'),n=t("#lb-wrap-"+y+"-"+s)):(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+y+'"></div>'),n=t("#lb-wrap-"+y)),n.wrapInner('<div class="lb-content"></div>'),l&&(e.prepend('<div class="lb-v-scrollbar"></div>'),e.find(".lb-v-scrollbar").append('<div class="lb-v-scrollbar-slider"></div>')),i&&(e.prepend('<div class="lb-h-scrollbar"></div>'),e.find(".lb-h-scrollbar").append('<div class="lb-h-scrollbar-slider"></div>')),y+=1}function s(r,l,i){var e=t(r);(l||i)&&(e.css({overflow:"hidden"}),function(r,l){var i=t(r),e=t(l);i.css({padding:0}),e.css({"padding-top":X+"px","padding-left":Y+"px","padding-bottom":O+"px","padding-right":R+"px"})}(e,e.find(".lb-wrap")),function(r){var l=t(r);l.css({width:l.width()+Y+R,height:l.height()+X+O})}(e),function(r,l){var i=t(r),e=t(l);i.css({position:"relative"}),e.css({width:i.width()+T-Y-R,height:i.height()+B-X-O})}(e,e.find(".lb-wrap")))}function n(r){var l=t(r);L&&C?(P=l.height()-12,U=l.width()-12,l.find(".lb-v-scrollbar").css({height:P}),l.find(".lb-h-scrollbar").css({width:U})):(P=l.height()-4,U=l.width()-4,l.find(".lb-v-scrollbar").css({height:P}),l.find(".lb-h-scrollbar").css({width:U}))}function a(){T=0,B=0,C=!1,L=!1,X=0,Y=0,O=0,R=0,j=0,k=0,S=0,Q=0,q=0,z=0,A=0,D=0,E=0,F=0,K=0,N=0,P=0,U=0}function o(r){var l,i,e,s=t(r);0!=s.find(".lb-v-scrollbar").length&&(l=20,e=D-s.find(".lb-v-scrollbar").height(),i=D-e-l,K=Math.round(D*i/q),K=K<l?l:K),0!=s.find(".lb-h-scrollbar").length&&(l=20,e=A-s.find(".lb-h-scrollbar").width(),i=A-e-l,N=Math.round(A*i/z),N=N<l?l:N),s.find(".lb-v-scrollbar-slider").css({height:K}),s.find(".lb-h-scrollbar-slider").css({width:N})}function c(r){G=(D-t(r).find(".lb-wrap").get(0).scrollHeight-j-S)/(P-K),J=(A-t(r).find(".lb-wrap").get(0).scrollWidth-k-Q)/(U-N);var l=t(r);l.attr("vratio",G),l.attr("hratio",J)}function d(i){var e=t(i);(L||C)&&e.find(".lb-wrap").scroll(function(i){if(e.find(".lb-v-scrollbar-slider").css({top:-t(this).scrollTop()/e.attr("vratio")}),e.find(".lb-h-scrollbar-slider").css({left:-t(this).scrollLeft()/e.attr("hratio")}),e.find(".lb-v-scrollbar").height()==parseInt(e.find(".lb-v-scrollbar-slider").css("top"))+e.find(".lb-v-scrollbar-slider").height()&&"function"==typeof r.reachedBottom&&!H){H=!0;s=t(this);r.reachedBottom.apply(t(this).children(".lb-content"),[function(){l(t(s).parent(),{height:t(s).children(".lb-content").get(0).scrollHeight,width:t(s).children(".lb-content").get(0).scrollWidth}),n(t(s).parent()),o(t(s).parent()),c(t(s).parent()),a(),H=!1}])}if(e.find(".lb-h-scrollbar").width()==parseInt(e.find(".lb-h-scrollbar-slider").css("left"))+e.find(".lb-h-scrollbar-slider").width()&&"function"==typeof r.reachedRight&&!W){W=!0;var s=t(this);r.reachedRight.apply(t(this).children(".lb-content"),[function(){l(t(s).parent(),{height:t(s).children(".lb-content").get(0).scrollHeight,width:t(s).children(".lb-content").get(0).scrollWidth}),n(t(s).parent()),o(t(s).parent()),c(t(s).parent()),a(),W=!1}])}autohide&&(e.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeIn(150),clearTimeout(h),h=setTimeout(function(){e.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)},2e3))}),L&&(e.find(".lb-v-scrollbar-slider").mousedown(function(r){return f=r.pageY,m=!0,I=t(this),x=e.find(".lb-wrap"),v=x.parent().attr("vratio"),u=I.position().top,!1}),e.find(".lb-v-scrollbar").mousedown(function(r){return t(r.target).hasClass("lb-v-scrollbar-slider")||e.find(".lb-wrap").scrollTop((r.pageY-t(this).offset().top)*Math.abs(e.attr("vratio"))-t(this).find(".lb-v-scrollbar-slider").height()/2),!1})),C&&(e.find(".lb-h-scrollbar-slider").mousedown(function(r){return b=r.pageX,w=!0,I=t(this),x=e.find(".lb-wrap"),v=x.parent().attr("hratio"),u=I.position().left,!1}),e.find(".lb-h-scrollbar").mousedown(function(r){return t(r.target).hasClass("lb-h-scrollbar-slider")||e.find(".lb-wrap").scrollLeft((r.pageX-t(this).offset().left)*Math.abs(e.attr("hratio"))-t(this).find(".lb-h-scrollbar-slider").width()/2),!1})),(L||C)&&autohide&&(e.find(".lb-v-scrollbar, .lb-h-scrollbar").hide(),e.hover(function(){},function(){e.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)}))}r=r||{},autohide=r.autohide;var h,b,f,p,g,v,u,w=!1,m=!1,I=0,x=0,H=!1,W=!1,M=t(this),y=0,T=0,B=0,C=!1,L=!1,X=0,Y=0,O=0,R=0,j=0,Q=0,S=0,k=0,q=0,z=0,A=0,D=0,E=0,F=0,G=0,J=0,K=0,N=0,P=0,U=0;return function(){for(var r=0;void 0!==M[r];r++)i(M[r])&&!t(M[r]).hasClass("nolionbars")&&(target=M[r],l(target),e(target,L,C),s(target,L,C),n(target),o(target),c(target),d(target),a())}(),t(document).mousemove(function(t){m&&(g=t.pageY,x.scrollTop((u+g-f)*Math.abs(v))),w&&(p=t.pageX,x.scrollLeft((u+p-b)*Math.abs(v)))}),t(document).mouseup(function(t){m&&(m=!1),w&&(w=!1)}),this.each(function(){})}}(jQuery);